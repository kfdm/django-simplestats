{% load static %}
<div class="card card-widget">
    <div class="card-header">
        {{widget.name}}
    </div>

    {% if widget.icon %}
    <img src="{% get_media_prefix %}{{widget.icon}}" class="card-img-top" alt="...">
    {% endif %}
    <div class="card-body">
        <p class="card-text">{{widget.formatted}}</p>
        <p class="card-text">{{widget.description}}</p>
    </div>
    <div class="card-footer">
        <a href="{% url 'stats:widget-user' widget.owner.username %}"
            class="badge badge-primary">{{widget.owner.username}}</a>
        <a href="{% url 'stats:widget-user' widget.owner.username %}"
            class="badge badge-secondary">{{widget.get_type_display}}</a>


        {% if widget.id in subscriptions %}
        <form class="form-inline" action="{% url 'stats:widget-unsubscribe' pk=widget.pk %}" method="POST">
            {% csrf_token %}
            <input name='next' value='{{request.get_full_path}}' type='hidden' />
            <button class="btn btn-xs btn-danger">Unsubscribe</button>
        </form>
        {% else %}
        <form class="form-inline" action="{% url 'stats:widget-subscribe' pk=widget.pk %}" method="POST">
            {% csrf_token %}
            <input name='next' value='{{request.get_full_path}}' type='hidden' />
            <button class="btn btn-xs btn-success">Subscribe</button>
        </form>
        {% endif %}
    </div>
</div>